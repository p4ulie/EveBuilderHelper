'''
Created on 14.1.2014

@author: paulie
'''

import unittest
from DBAccessSQLite import DBAccessSQLite
from EveOnline.EveDB import EveDB


class TestEveDB(unittest.TestCase):

    DB = '../data/eve.db'
    eveDB = None

    maxDiff = None

    def setUp(self):
        self.dbAccess = DBAccessSQLite(self.DB)
        self.eveDB = EveDB.EveDB(self.dbAccess)

    def tearDown(self):
        self.dbAccess.close()

    def test_get_list_of_inv_categories(self):
        categories = {2: {'description': '', 'icon_id': None, 'category_id': 2, 'category_name': 'Celestial'}, 4: {'description': '', 'icon_id': 22, 'category_id': 4, 'category_name': 'Material'}, 5: {'description': '', 'icon_id': 33, 'category_id': 5, 'category_name': 'Accessories'}, 6: {'description': '', 'icon_id': None, 'category_id': 6, 'category_name': 'Ship'}, 7: {'description': '', 'icon_id': 67, 'category_id': 7, 'category_name': 'Module'}, 8: {'description': '', 'icon_id': None, 'category_id': 8, 'category_name': 'Charge'}, 9: {'description': '', 'icon_id': 21, 'category_id': 9, 'category_name': 'Blueprint'}, 16: {'description': 'Where all the skills go under.', 'icon_id': 33, 'category_id': 16, 'category_name': 'Skill'}, 17: {'description': '', 'icon_id': 0, 'category_id': 17, 'category_name': 'Commodity'}, 18: {'description': 'Player owned and controlled drones.', 'icon_id': 0, 'category_id': 18, 'category_name': 'Drone'}, 20: {'description': 'Implant', 'icon_id': 0, 'category_id': 20, 'category_name': 'Implant'}, 22: {'description': '', 'icon_id': 0, 'category_id': 22, 'category_name': 'Deployable'}, 23: {'description': 'Player owned structure related objects', 'icon_id': 0, 'category_id': 23, 'category_name': 'Structure'}, 24: {'description': '', 'icon_id': 0, 'category_id': 24, 'category_name': 'Reaction'}, 25: {'description': '', 'icon_id': None, 'category_id': 25, 'category_name': 'Asteroid'}, 30: {'description': '1. clothing, especially outerwear; garments; attire; raiment.\r\n2. anything that decorates or covers.\r\n3. superficial appearance; aspect; guise. ', 'icon_id': None, 'category_id': 30, 'category_name': 'Apparel'}, 32: {'description': 'Subsystems for tech 3 ships', 'icon_id': None, 'category_id': 32, 'category_name': 'Subsystem'}, 34: {'description': '', 'icon_id': None, 'category_id': 34, 'category_name': 'Ancient Relics'}, 35: {'description': '', 'icon_id': None, 'category_id': 35, 'category_name': 'Decryptors'}, 39: {'description': '', 'icon_id': None, 'category_id': 39, 'category_name': 'Infrastructure Upgrades'}, 40: {'description': '', 'icon_id': None, 'category_id': 40, 'category_name': 'Sovereignty Structures'}, 41: {'description': 'Stuff for planetary interaction', 'icon_id': None, 'category_id': 41, 'category_name': 'Planetary Interaction'}, 42: {'description': 'These are Items that can be extracted from a planet. ', 'icon_id': None, 'category_id': 42, 'category_name': 'Planetary Resources'}, 43: {'description': '', 'icon_id': None, 'category_id': 43, 'category_name': 'Planetary Commodities'}, 46: {'description': 'Anchorable/Onlinable objects that operate similar to POS/SOV structures, but do not link to towers or sovereignty. Each class of orbital defines its own valid anchoring locations via Python code.', 'icon_id': None, 'category_id': 46, 'category_name': 'Orbitals'}, 63: {'description': 'Special Edition Assets', 'icon_id': None, 'category_id': 63, 'category_name': 'Special Edition Assets'}}
        self.failUnlessEqual(categories,
                             self.eveDB.get_list_of_inv_categories())

    def test_get_list_of_inv_groups(self):
        groups = {448: {'group_name': 'Audit Log Secure Container', 'description': '', 'icon_id': None, 'group_id': 448, 'category_id': 2}, 835: {'group_name': 'Station Upgrade Platform', 'description': '', 'icon_id': 0, 'group_id': 835, 'category_id': 2}, 836: {'group_name': 'Station Improvement Platform', 'description': '', 'icon_id': 0, 'group_id': 836, 'category_id': 2}, 711: {'group_name': 'Harvestable Cloud', 'description': '', 'icon_id': 0, 'group_id': 711, 'category_id': 2}, 649: {'group_name': 'Freight Container', 'description': 'Freight Containers are commonly used in Freighter-class ships to accomodate their massive cargobays.', 'icon_id': 1174, 'group_id': 649, 'category_id': 2}, 12: {'group_name': 'Cargo Container', 'description': '', 'icon_id': 16, 'group_id': 12, 'category_id': 2}, 1165: {'group_name': 'Satellite', 'description': '', 'icon_id': None, 'group_id': 1165, 'category_id': 2}, 14: {'group_name': 'Biomass', 'description': 'Corpse of human. Can be sold for clone production.', 'icon_id': 0, 'group_id': 14, 'category_id': 2}, 1071: {'group_name': 'Flashpoint', 'description': 'Points of conflict on a planet.', 'icon_id': None, 'group_id': 1071, 'category_id': 2}, 307: {'group_name': 'Construction Platform', 'description': '', 'icon_id': 0, 'group_id': 307, 'category_id': 2}, 340: {'group_name': 'Secure Cargo Container', 'description': '', 'icon_id': 0, 'group_id': 340, 'category_id': 2}, 1198: {'group_name': 'Orbital Target', 'description': 'Orbital targets are locations on the ground lockable by ships.', 'icon_id': None, 'group_id': 1198, 'category_id': 2}}
        self.failUnlessEqual(groups,
                             self.eveDB.get_list_of_inv_groups(category_id=2))

    def test_get_list_of_inv_items(self):
        items = {3296: {'description': 'A standard cargo container, used for common freight.', 'race_id': None, 'market_group_id': 3296, 'volume': 650.0, 'type_name': 'Large Standard Container', 'type_id': 3296, 'capacity': 780.0, 'mass': 1000000.0, 'base_price': 27000, 'portion_size': 1, 'group_id': 12}, 3297: {'description': 'A standard cargo container, used for common freight.', 'race_id': None, 'market_group_id': 3297, 'volume': 100.0, 'type_name': 'Small Standard Container', 'type_id': 3297, 'capacity': 120.0, 'mass': 10000.0, 'base_price': 4400, 'portion_size': 1, 'group_id': 12}, 3293: {'description': 'A standard cargo container, used for common freight.', 'race_id': None, 'market_group_id': 3293, 'volume': 325.0, 'type_name': 'Medium Standard Container', 'type_id': 3293, 'capacity': 390.0, 'mass': 100000.0, 'base_price': 12000, 'portion_size': 1, 'group_id': 12}}
        self.failUnlessEqual(items,
                             self.eveDB.get_list_of_inv_items(group_id=12))

    def test_get_inv_item(self):
        item = {'base_price': 12000, 'capacity': 390.0, 'description': 'A standard cargo container, used for common freight.', 'group_id': 12, 'market_group_id': 3293, 'mass': 100000.0, 'portion_size': 1, 'race_id': None, 'type_id': 3293, 'type_name': 'Medium Standard Container', 'volume': 325.0}
        self.failUnlessEqual(item,
                             self.eveDB.get_inv_item(type_id=3293))

    def test_get_blueprint_id_for_item(self):
        blueprint = 32860
        self.failUnlessEqual(blueprint,
                             self.eveDB.get_blueprint_id_for_item(type_id=3293))

    def test_get_materials_for_blueprint(self):
        material = {34: {'material_type_id': 34, 'consume': 1, 'quantity': 1111}, 35: {'material_type_id': 35, 'consume': 1, 'quantity': 444}}
        self.failUnlessEqual(material,
                             self.eveDB.get_materials_for_blueprint(blueprint_type_id=32860))

    def test_get_time_for_blueprint(self):
        time = 600
        self.failUnlessEqual(time,
                             self.eveDB.get_time_for_blueprint(blueprint_type_id=32860))

    def test_get_list_of_activities(self):
        ramActivities = {0: {'activity_id': 0, 'icon_no': None, 'description': 'No activity', 'activity_name': 'None'}, 1: {'activity_id': 1, 'icon_no': '18_02', 'description': 'Manufacturing', 'activity_name': 'Manufacturing'}, 3: {'activity_id': 3, 'icon_no': '33_02', 'description': 'Researching time efficiency', 'activity_name': 'Researching Time Efficiency'}, 4: {'activity_id': 4, 'icon_no': '33_02', 'description': 'Researching material efficiency', 'activity_name': 'Researching Material Efficiency'}, 5: {'activity_id': 5, 'icon_no': '33_02', 'description': 'Copying', 'activity_name': 'Copying'}, 7: {'activity_id': 7, 'icon_no': '33_02', 'description': 'The process of creating a blueprint from an item.', 'activity_name': 'Reverse Engineering'}, 8: {'activity_id': 8, 'icon_no': '33_02', 'description': 'The process of creating a more advanced item based on an existing item', 'activity_name': 'Invention'}}
        self.failUnlessEqual(ramActivities,
                             self.eveDB.get_list_of_activities())

    def test_get_list_of_assembly_line_types(self):
        ramAssemblyLineTypes = {155: {'base_material_multiplier': 0.98, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Large Ship Assembly Array', 'description': 'Large ship assembly array for manufacture of battleships, freighters ', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.75, 'assembly_line_type_id': 155, 'min_cost_per_hour': None}, 150: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Ore Cap Ship Manufacturing', 'description': 'ore cap ship manufacture lines', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.8, 'assembly_line_type_id': 150, 'min_cost_per_hour': None}, 6: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'STATION manufacturing', 'description': 'STATION manufacturing', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 6, 'min_cost_per_hour': 333.0}, 136: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Gallente Outpost Factory1 Tier3', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 136, 'min_cost_per_hour': None}, 137: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Gallente Outpost Factory1 Tier2', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 137, 'min_cost_per_hour': None}, 10: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Capital Ship Assembly', 'description': 'Capital Ship Assembly', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 10, 'min_cost_per_hour': None}, 13: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Manufacturing', 'description': 'Manufacturing', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 13, 'min_cost_per_hour': None}, 17: {'base_material_multiplier': 0.98, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Small Ship Assembly Array', 'description': 'Small Ship Assembly Array\r\n', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.75, 'assembly_line_type_id': 17, 'min_cost_per_hour': None}, 18: {'base_material_multiplier': 0.98, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Advanced Small Ship Assembly Array', 'description': 'Advanced Small Ship Assembly Array\r\n', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.75, 'assembly_line_type_id': 18, 'min_cost_per_hour': None}, 19: {'base_material_multiplier': 0.98, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Medium Ship Assembly Array', 'description': 'Medium Ship Assembly Array\r\n', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.75, 'assembly_line_type_id': 19, 'min_cost_per_hour': None}, 20: {'base_material_multiplier': 0.98, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Advanced Medium Ship Assembly Array', 'description': 'Advanced Medium Ship Assembly Array\r\n', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.75, 'assembly_line_type_id': 20, 'min_cost_per_hour': None}, 21: {'base_material_multiplier': 0.98, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'X Large Ship Assembly Array', 'description': 'X Large Ship Assembly Array\r\n', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.75, 'assembly_line_type_id': 21, 'min_cost_per_hour': None}, 22: {'base_material_multiplier': 0.98, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Advanced Large Ship Assembly Array', 'description': 'Advanced Large Ship Assembly Array\r\n', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.75, 'assembly_line_type_id': 22, 'min_cost_per_hour': None}, 23: {'base_material_multiplier': 1.05, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Rapid Equipment Assembly Array', 'description': 'Rapid Equipment Assembly Array\r\n', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.65, 'assembly_line_type_id': 23, 'min_cost_per_hour': None}, 24: {'base_material_multiplier': 0.98, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Equipment Assembly Array', 'description': 'Equipment Assembly Array\r\n', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.75, 'assembly_line_type_id': 24, 'min_cost_per_hour': None}, 25: {'base_material_multiplier': 0.98, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Ammunition Assembly Array', 'description': 'Ammunition Assembly Array', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.75, 'assembly_line_type_id': 25, 'min_cost_per_hour': None}, 26: {'base_material_multiplier': 0.98, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Drone Assembly Array', 'description': 'Drone Assembly Array', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.75, 'assembly_line_type_id': 26, 'min_cost_per_hour': None}, 27: {'base_material_multiplier': 0.98, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Component Assembly Array', 'description': 'Component Assembly Array', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.75, 'assembly_line_type_id': 27, 'min_cost_per_hour': None}, 31: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Amarr Outpost Manufacturing', 'description': 'Amarr Outpost Manufacturing', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.7, 'assembly_line_type_id': 31, 'min_cost_per_hour': None}, 161: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Subsystem Manufacturing', 'description': 'Subsystem Manufacturing', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 161, 'min_cost_per_hour': None}, 35: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'STATION 0.5+ Manufacturing', 'description': 'STATION 0.5+ Manufacturing', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 35, 'min_cost_per_hour': 333.0}, 37: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Booster Manufacturing', 'description': 'Booster Manufacturing', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 37, 'min_cost_per_hour': None}, 145: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Ore Capital Ship', 'description': 'ore cap ship asteroid line', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 145, 'min_cost_per_hour': None}, 43: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Amarr Outpost Factory1 Tier1', 'description': 'Amarr Outpost w/ Type 1 Tier 1', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.7, 'assembly_line_type_id': 43, 'min_cost_per_hour': None}, 159: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Advanced Subsystem Assembly Array', 'description': 'Advanced Subsystem Assembly Array', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 159, 'min_cost_per_hour': None}, 45: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Amarr Outpost Factory1(2) Tier1(1)', 'description': 'Amarr Outpost w/ Type 1 Tier 1, Type 2 Tier 1', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.7, 'assembly_line_type_id': 45, 'min_cost_per_hour': None}, 46: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Minmatar Outpost Factory1 Tier1', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 46, 'min_cost_per_hour': None}, 47: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Amarr Outpost Factory1(2) Tier1(2)', 'description': 'Amarr Outpost w/ Type 1 Tier 1, Type 2 Tier 2', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.7, 'assembly_line_type_id': 47, 'min_cost_per_hour': None}, 48: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Amarr Outpost Factory1(2) Tier1(3)', 'description': 'Amarr Outpost w/ Type 1 Tier 1, Type 2 Tier 3', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.7, 'assembly_line_type_id': 48, 'min_cost_per_hour': None}, 52: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Minmatar Outpost Factory1 Tier2', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 52, 'min_cost_per_hour': None}, 54: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Amarr Outpost Factory1 Tier2', 'description': 'Amarr Outpost w/ Type 1 Tier 2', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.7, 'assembly_line_type_id': 54, 'min_cost_per_hour': None}, 56: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Amarr Outpost Factory1(2) Tier2(1)', 'description': 'Amarr Outpost w/ Type 1 Tier 2, Type 2 Tier 1', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.7, 'assembly_line_type_id': 56, 'min_cost_per_hour': None}, 57: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Amarr Outpost Factory1(2) Tier2(2)', 'description': 'Amarr Outpost w/ Type 1 Tier 2, Type 2 Tier 2', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.7, 'assembly_line_type_id': 57, 'min_cost_per_hour': None}, 58: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Amarr Outpost Factory1(2) Tier2(3)', 'description': 'Amarr Outpost w/ Type 1 Tier 2, Type 2 Tier 3', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.7, 'assembly_line_type_id': 58, 'min_cost_per_hour': None}, 59: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Amarr Outpost Factory1 Tier3', 'description': 'Amarr Outpost w/ Type 1 Tier 3', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.7, 'assembly_line_type_id': 59, 'min_cost_per_hour': None}, 60: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Amarr Outpost Factory1(2) Tier3(1)', 'description': 'Amarr Outpost w/ Type 1 Tier 3, Type 2 Tier 1', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.7, 'assembly_line_type_id': 60, 'min_cost_per_hour': None}, 61: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Amarr Outpost Factory1(2) Tier3(2)', 'description': 'Amarr Outpost w/ Type 1 Tier 3, Type 2 Tier 2', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.7, 'assembly_line_type_id': 61, 'min_cost_per_hour': None}, 62: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Minmatar Outpost Factory1 Tier3', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 62, 'min_cost_per_hour': None}, 66: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Amarr Outpost Factory2 Tier1', 'description': 'Amarr Outpost w/ Type 2 Tier 1', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.7, 'assembly_line_type_id': 66, 'min_cost_per_hour': None}, 67: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Amarr Outpost Factory2 Tier2', 'description': 'Amarr Outpost w/ Type 2 Tier 2', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.7, 'assembly_line_type_id': 67, 'min_cost_per_hour': None}, 68: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Amarr Outpost Factory2 Tier3', 'description': 'Amarr Outpost w/ Type 2 Tier 3', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.7, 'assembly_line_type_id': 68, 'min_cost_per_hour': None}, 70: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Caldari Outpost Factory Tier1', 'description': 'Caldari Outpost Tier 1 Factory', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 70, 'min_cost_per_hour': None}, 79: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Caldari Outpost Factory Tier2', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 79, 'min_cost_per_hour': None}, 80: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Caldari Outpost Factory Tier3', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 80, 'min_cost_per_hour': None}, 93: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Gallente Outpost Factory1 Tier1', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 93, 'min_cost_per_hour': None}, 94: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Gallente Outpost Factory1(2) Tier1(1)', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 94, 'min_cost_per_hour': None}, 95: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Gallente Outpost Factory1(2) Tier1(2)', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 95, 'min_cost_per_hour': None}, 96: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Gallente Outpost Factory1(2) Tier1(3)', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 96, 'min_cost_per_hour': None}, 171: {'base_material_multiplier': 0.85, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Thukker Component Assembly Array', 'description': 'This assembly array is implemented in or around Kronos, in order to buffer lowsec capital producers from the impact of the refining changes. Gives an increased ME bonus, can only be anchored in lowsec.', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 0.75, 'assembly_line_type_id': 171, 'min_cost_per_hour': None}, 98: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Gallente Outpost Factory1(2) Tier2(1)', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 98, 'min_cost_per_hour': None}, 99: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Gallente Outpost Factory1(2) Tier2(2)', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 99, 'min_cost_per_hour': None}, 100: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Gallente Outpost Factory1(2) Tier2(3)', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 100, 'min_cost_per_hour': None}, 102: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Gallente Outpost Factory1(2) Tier3(1)', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 102, 'min_cost_per_hour': None}, 103: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Gallente Outpost Factory1(2) Tier3(2)', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 103, 'min_cost_per_hour': None}, 104: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Gallente Outpost Factory2 Tier1', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 104, 'min_cost_per_hour': None}, 105: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Gallente Outpost Factory2 Tier2', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 105, 'min_cost_per_hour': None}, 106: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Gallente Outpost Factory2 Tier3', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 106, 'min_cost_per_hour': None}, 116: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Minmatar Outpost Factory1(2) Tier1(1)', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 116, 'min_cost_per_hour': None}, 117: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Minmatar Outpost Factory1(2) Tier1(2)', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 117, 'min_cost_per_hour': None}, 118: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Minmatar Outpost Factory1(2) Tier1(3)', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 118, 'min_cost_per_hour': None}, 119: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Minmatar Outpost Factory1(2) Tier2(1)', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 119, 'min_cost_per_hour': None}, 120: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Minmatar Outpost Factory1(2) Tier2(2)', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 120, 'min_cost_per_hour': None}, 121: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Minmatar Outpost Factory1(2) Tier2(3)', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 121, 'min_cost_per_hour': None}, 122: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Minmatar Outpost Factory1(2) Tier3(1)', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 122, 'min_cost_per_hour': None}, 123: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Minmatar Outpost Factory1(2) Tier3(2)', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 123, 'min_cost_per_hour': None}, 124: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Minmatar Outpost Factory2 Tier1', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 124, 'min_cost_per_hour': None}, 125: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Minmatar Outpost Factory2 Tier2', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 125, 'min_cost_per_hour': None}, 126: {'base_material_multiplier': 1.0, 'volume': 1.0, 'activity_id': 1, 'assembly_line_type_name': 'Minmatar Outpost Factory2 Tier3', 'description': '', 'base_cost_multiplier': 1.0, 'base_time_multiplier': 1.0, 'assembly_line_type_id': 126, 'min_cost_per_hour': None}}
        self.failUnlessEqual(ramAssemblyLineTypes,
                             self.eveDB.get_list_of_assembly_line_types())

    def test_get_assembly_line_type(self):
        assembly_line_type = {'volume': 1.0, 'base_time_multiplier': 0.75, 'activity_id': 1, 'assemblyLineTypeName': 'Medium Ship Assembly Array', 'min_cost_per_hour': None, 'description': 'Medium Ship Assembly Array\r\n', 'base_material_multiplier': 0.98, 'base_cost_multiplier': 1.0, 'assemblyLineTypeID': 19}
        self.failUnlessEqual(assembly_line_type,
                             self.eveDB.get_assembly_line_type(assembly_line_type_name='Medium Ship Assembly Array'))


if __name__ == "__main__":
    unittest.main()
